FROM tomcat

LABEL "Docker file for provenance-explorer"

MAINTAINER prov@knmi.nl

RUN apt-get update && apt-get install -y maven curl less vim 


# clone s-prov
RUN mkdir -p /prov/
WORKDIR /prov/
RUN curl -L -O https://github.com/andrejsim/s-provenance/archive/master.zip 
RUN unzip master.zip
RUN rm master.zip

# compile viewer.war
WORKDIR /prov/s-provenance-master/provenance-explorer

RUN mvn compile war:war
		
RUN cp ./target/provenance-explorer.war /usr/local/tomcat/webapps

RUN cp /prov/s-provenance-master/resources/j2ep-1.0.war /usr/local/tomcat/webapps


#CMD cp /prov/s-provenance-master/resources/data.xml /usr/local/tomcat/webapps/j2ep-1.0/WEB-INF/config/data.xml 
#CMD touch /usr/local/tomcat/webapps/j2ep-1.0/WEB-INF/web.xml

## touch /prov/s-provenance-master/resources/data.xml
## RUN /usr/local/tomcat/bin/shutdown.sh
 

# docker run -it -p 9000:8080 explorer


